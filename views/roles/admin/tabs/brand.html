<div class="stack">
  <div class="card">
    <h3>Branding</h3>
    <div class="stack">
      <div class="row wrap" style="align-items:flex-end">
        <div class="field" style="max-width:260px">
          <label>Primary Color</label>
          <input id="b-primary" type="color" value="#1F3C88">
        </div>
        <div class="field" style="max-width:260px">
          <label>Accent Color</label>
          <input id="b-accent" type="color" value="#6BCB77">
        </div>
        <div class="field" style="max-width:260px">
          <label>Date Format</label>
          <input id="b-date" placeholder="yyyy-MM-dd" value="yyyy-MM-dd">
        </div>
      </div>

      <div class="row wrap" style="align-items:center; gap:16px">
        <div class="field" style="max-width:360px">
          <label>Logo (PNG/JPG/WebP/SVG)</label>
          <input id="b-logo-file" type="file" accept=".png,.jpg,.jpeg,.webp,.svg">
          <div class="muted" style="font-size:12px">Tip: square image works best (shown at 36×36 in header).</div>
        </div>

        <div style="display:flex; align-items:center; gap:12px">
          <img id="brandLogoPreview" alt="Logo preview" style="width:56px;height:56px;border-radius:12px;object-fit:cover;border:1px solid var(--border)">
          <div class="muted" id="brandLogoHint" style="max-width:240px">Preview will appear here after you pick a file.</div>
        </div>
      </div>

      <div class="row">
        <button id="b-save" class="btn primary">
          <span class="spinner hidden" id="b-save-spin"></span><span>Save & Apply</span>
        </button>
        <div id="b-msg" class="muted"></div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Allowed CORS Origins</h3>
    <div class="stack">
      <textarea id="cors-origins" placeholder="https://example.com, https://sub.domain.com" rows="3" style="max-width:720px"></textarea>
      <div class="row">
        <button id="cors-save" class="btn">
          <span class="spinner dark hidden" id="cors-save-spin"></span><span>Save Origins</span>
        </button>
        <div id="cors-msg" class="muted"></div>
      </div>
      <div class="muted" style="font-size:12px">Comma‑separated list of origins that can access the API.</div>
    </div>
  </div>
</div>

<script type="module">
  // Lightweight client-only preview (doesn't change saved branding until you click Save)
  const inp = document.getElementById('b-logo-file');
  const prev = document.getElementById('brandLogoPreview');
  const hint = document.getElementById('brandLogoHint');
  if (inp && prev) {
    inp.addEventListener('change', () => {
      const file = inp.files?.[0];
      if (!file) { prev.src = ''; hint.textContent = 'Preview will appear here after you pick a file.'; return; }
      const url = URL.createObjectURL(file);
      prev.src = url;
      hint.textContent = file.name;
    });
  }
</script>
